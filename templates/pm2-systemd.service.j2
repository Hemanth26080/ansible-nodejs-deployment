[Unit]
Description=PM2 process manager for {{ app_user }}
Documentation=https://pm2.keymetrics.io/
After=network.target

[Service]
Type=forking
User={{ app_user }}
WorkingDirectory={{ app_dir }}
ExecStart=/usr/bin/pm2 start {{ app_dir }}/ecosystem.config.js
ExecStop=/usr/bin/pm2 stop {{ app_dir }}/ecosystem.config.js
ExecReload=/usr/bin/pm2 reload {{ app_dir }}/ecosystem.config.js
TimeoutStopSec=10
Restart=always
RestartSec=5
Environment=PATH=/usr/bin:/usr/local/bin
Environment=NODE_ENV=production

[Install]
WantedBy=multi-user.target